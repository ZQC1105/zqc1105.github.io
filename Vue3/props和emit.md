
# 为什么把“任务项”拆成子组件（TodoItem.vue）是 Vue 开发的最佳实践？

> 使用 `props` 传递数据、`emit` 触发事件，不只是“代码变短”，而是让项目从“能跑”走向“好维护、可扩展、易协作”。

---

## ✅ 1. 高内聚 · 低耦合（架构核心）
| 角色     | 关注点                                 |
| -------- | -------------------------------------- |
| TodoItem | 只关心“**一个任务**长什么样、怎么交互” |
| TodoList | 只关心“**一堆任务**怎么增删改查”       |

- 想改删除按钮样式？→ 只动 `TodoItem.vue`  
- 想换数据源？→ 只改 `TodoList.vue`  
- **类比乐高**：积木独立，组合无限。

---

## ✅ 2. 极致复用（DRY）
```vue
<!-- 今日任务 -->
<TodoItem v-for="t in todayTodos" :key="t.id" :todo="t" @delete="removeTodo" />

<!-- 项目 A 看板 -->
<TodoItem v-for="t in projectATodos" :key="t.id" :todo="t" @delete="removeTodo" />
```
一处编写，到处使用；**零复制粘贴**。

---

## ✅ 3. 逻辑清晰 · 易于维护
| 未拆分                           | 拆分后                    |
| -------------------------------- | ------------------------- |
| 模板臃肿、事件/样式/交互堆在一起 | 模板只剩 `<TodoItem … />` |
| 改一处怕牵一发动全身             | 各组件内部自治，互不影响  |

---

## ✅ 4. 团队协作友好
| 开发者 | 负责组件 | 接口约定         |
| ------ | -------- | ---------------- |
| A      | TodoList | 数据流、API 对接 |
| B      | TodoItem | UI、动效、无障碍 |

**无需关心对方内部实现**，props / emit 就是“合同”。

---

## ✅ 5. 单元测试轻而易举
```ts
// 伪代码
const wrapper = mount(TodoItem, {
  props: { todo: { id: 1, text: 'test' } }
})
await wrapper.find('button').trigger('click')
expect(wrapper.emitted('delete')[0]).toEqual([1])
```
**无需启动整个应用**，测试粒度更细、更快、更稳。

---

## ✅ 6. 性能优化空间
- Vue diff 以**组件为单位**更新；  
- 配合 `v-memo` / `shouldUpdate` 可跳过静态节点；  
- 未来做**虚拟滚动**只需渲染可视区 `<TodoItem />`。

---

## ✅ 7. 符合 Vue 官方设计哲学
> “组件是 Vue 的核心构建块，通过组合小组件构建大型应用。”  
> —— Vue 3 官方文档

用 `props` 向下传数据，用 `emit` 向上抛事件，就是**最 Vue 的方式**。

---

## 🆚 对比一览表
| 场景      | 不拆分         | 拆为 TodoItem |
| --------- | -------------- | ------------- |
| 代码复用  | ❌ 拷贝粘贴     | ✅ 随处引用    |
| 修改风险  | ⚠️ 牵一发动全身 | ✅ 局部封闭    |
| 新人上手  | ❌ 逻辑混杂     | ✅ 职责单一    |
| UI 一致性 | ❌ 容易走样     | ✅ 一处统管    |
| 测试成本  | ❌ 必须整页跑   | ✅ 可单测组件  |
| 扩展性    | ❌ 越加越乱     | ✅ 内部增量    |

---

## 💡 一句话总结
> 拆组件不是为了“拆”，而是为了“合”——  
> 用**标准化的小模块**，更灵活、更可靠地组装复杂应用。

---

## 🎉 下一步可继续
1. 给 `TodoItem` 加 `v-model` 支持完成状态（Day4）  
2. 使用 `slots` 让子组件更灵活  
3. 抽象通用 `<BaseButton>`、`<BaseIcon>` 等原子组件

需要我继续带你走 Day4 吗？😊
```