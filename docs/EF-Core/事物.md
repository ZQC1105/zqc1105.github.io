# ğŸ”„ **æ˜¯çš„ï¼ä½¿ç”¨äº‹åŠ¡æ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§**

å½“å–æ¶ˆå¤–é”®ï¼Œä½¿ç”¨ç´¢å¼•ç»´æŠ¤å…³ç³»æ—¶ï¼Œ**äº‹åŠ¡æˆä¸ºä¿è¯æ•°æ®ä¸€è‡´æ€§çš„å…³é”®æ‰‹æ®µ**ã€‚ä½†è¦æ³¨æ„ï¼Œäº‹åŠ¡çš„ä½¿ç”¨æ–¹å¼å’Œç­–ç•¥æœ‰æ‰€ä¸åŒã€‚

## ğŸ“Œ **æ ¸å¿ƒåŸåˆ™ï¼šæ²¡æœ‰å¤–é”®ï¼Œäº‹åŠ¡æ›´é‡è¦**

### **ä¼ ç»Ÿå¤–é”®æ–¹å¼**ï¼š
```csharp
// å¤–é”®è‡ªåŠ¨ä¿è¯ä¸€è‡´æ€§ï¼Œäº‹åŠ¡ç›¸å¯¹ç®€å•
using var transaction = await context.Database.BeginTransactionAsync();
try
{
    // åˆ é™¤Blog - å¤–é”®ä¼šè‡ªåŠ¨é˜»æ­¢æˆ–çº§è”
    context.Blogs.Remove(blog);
    await context.SaveChangesAsync(); // å¤–é”®çº¦æŸåœ¨æ­¤ç”Ÿæ•ˆ
    
    await transaction.CommitAsync();
}
catch (DbUpdateException ex)
{
    // å¤–é”®å†²çªä¼šåœ¨è¿™é‡Œæ•è·
    await transaction.RollbackAsync();
}
```

### **æ— å¤–é”®æ–¹å¼**ï¼š
```csharp
// å¿…é¡»æ‰‹åŠ¨ä¿è¯ä¸€è‡´æ€§
using var transaction = await context.Database.BeginTransactionAsync();
try
{
    // 1. å…ˆå¤„ç†ç›¸å…³æ•°æ®ï¼ˆåº”ç”¨å±‚çº§è”ï¼‰
    var relatedPosts = await context.Posts
        .Where(p => p.BlogId == blogId)
        .ToListAsync();
    
    // æ–¹æ¡ˆAï¼šåˆ é™¤ç›¸å…³Posts
    context.Posts.RemoveRange(relatedPosts);
    
    // æ–¹æ¡ˆBï¼šå°†å¤–é”®è®¾ä¸ºnull
    foreach (var post in relatedPosts)
    {
        post.BlogId = null;
    }
    
    // 2. å†åˆ é™¤ä¸»ä½“
    var blog = await context.Blogs.FindAsync(blogId);
    context.Blogs.Remove(blog);
    
    await context.SaveChangesAsync(); // ä¸ä¼šè§¦å‘å¤–é”®é”™è¯¯
    await transaction.CommitAsync();  // è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»š
}
catch
{
    await transaction.RollbackAsync();
    throw;
}
```

## ğŸ›¡ï¸ **äº‹åŠ¡ç­–ç•¥åˆ†ç±»**

### **1. ç®€å•äº‹åŠ¡ï¼ˆå•è¡¨æ“ä½œï¼‰**
```csharp
public async Task UpdateBlogNameAsync(int blogId, string newName)
{
    using var transaction = await context.Database.BeginTransactionAsync();
    try
    {
        var blog = await context.Blogs.FindAsync(blogId);
        blog.Name = newName;
        blog.UpdatedAt = DateTime.UtcNow;
        
        await context.SaveChangesAsync();
        await transaction.CommitAsync();
    }
    catch
    {
        await transaction.RollbackAsync();
        throw;
    }
}
```

### **2. å…³è”æ•°æ®äº‹åŠ¡ï¼ˆå¤šè¡¨æ“ä½œï¼‰**
```csharp
public async Task TransferPostsAsync(int fromBlogId, int toBlogId, List<int> postIds)
{
    // æ— å¤–é”®æ—¶ï¼Œå¿…é¡»æ‰‹åŠ¨éªŒè¯å’Œäº‹åŠ¡
    using var transaction = await context.Database.BeginTransactionAsync();
    try
    {
        // éªŒè¯ç›®æ ‡Blogå­˜åœ¨
        var toBlogExists = await context.Blogs
            .AnyAsync(b => b.Id == toBlogId);
        
        if (!toBlogExists)
            throw new InvalidOperationException("ç›®æ ‡Blogä¸å­˜åœ¨");
        
        // éªŒè¯æ‰€æœ‰Postså­˜åœ¨ä¸”å±äºæºBlog
        var posts = await context.Posts
            .Where(p => postIds.Contains(p.Id) && p.BlogId == fromBlogId)
            .ToListAsync();
        
        if (posts.Count != postIds.Count)
            throw new InvalidOperationException("éƒ¨åˆ†Postsä¸å­˜åœ¨æˆ–ä¸å±äºæºBlog");
        
        // æ‰¹é‡æ›´æ–°
        foreach (var post in posts)
        {
            post.BlogId = toBlogId;
            post.UpdatedAt = DateTime.UtcNow;
        }
        
        // æ›´æ–°æºBlogçš„ç»Ÿè®¡ä¿¡æ¯
        var fromBlog = await context.Blogs.FindAsync(fromBlogId);
        if (fromBlog != null)
        {
            fromBlog.PostCount = await context.Posts
                .CountAsync(p => p.BlogId == fromBlogId);
        }
        
        // æ›´æ–°ç›®æ ‡Blogçš„ç»Ÿè®¡ä¿¡æ¯
        var toBlog = await context.Blogs.FindAsync(toBlogId);
        if (toBlog != null)
        {
            toBlog.PostCount = await context.Posts
                .CountAsync(p => p.BlogId == toBlogId);
        }
        
        await context.SaveChangesAsync();
        await transaction.CommitAsync();
    }
    catch
    {
        await transaction.RollbackAsync();
        throw;
    }
}
```

### **3. è¡¥å¿äº‹åŠ¡ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰**
```csharp
public class CompensatingTransactionService
{
    private readonly AppDbContext _context;
    private readonly ILogger<CompensatingTransactionService> _logger;
    
    public async Task DeleteBlogWithCompensationAsync(int blogId)
    {
        var transactionId = Guid.NewGuid();
        var steps = new List<CompensationStep>();
        
        try
        {
            // æ­¥éª¤1: å¤‡ä»½ç›¸å…³æ•°æ®ï¼ˆç”¨äºè¡¥å¿ï¼‰
            var posts = await _context.Posts
                .Where(p => p.BlogId == blogId)
                .Select(p => new PostBackup
                {
                    Id = p.Id,
                    BlogId = p.BlogId,
                    Title = p.Title,
                    Content = p.Content
                })
                .ToListAsync();
            
            steps.Add(new CompensationStep
            {
                Step = 1,
                Action = "BackupPosts",
                Data = JsonSerializer.Serialize(posts)
            });
            
            // æ­¥éª¤2: æ›´æ–°ç›¸å…³æ•°æ®çŠ¶æ€
            await _context.Posts
                .Where(p => p.BlogId == blogId)
                .ExecuteUpdateAsync(p => 
                    p.SetProperty(x => x.Status, PostStatus.Archived)
                     .SetProperty(x => x.BlogId, (int?)null));
            
            steps.Add(new CompensationStep
            {
                Step = 2,
                Action = "ArchivePosts",
                BlogId = blogId
            });
            
            // æ­¥éª¤3: åˆ é™¤Blog
            var blog = await _context.Blogs.FindAsync(blogId);
            _context.Blogs.Remove(blog);
            
            steps.Add(new CompensationStep
            {
                Step = 3,
                Action = "DeleteBlog",
                BlogId = blogId
            });
            
            await _context.SaveChangesAsync();
            
            // è®°å½•æˆåŠŸ
            await RecordTransactionSuccessAsync(transactionId);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "åˆ é™¤Blogå¤±è´¥ï¼Œå¼€å§‹è¡¥å¿");
            
            // æ‰§è¡Œè¡¥å¿æ“ä½œ
            await ExecuteCompensationAsync(transactionId, steps);
            
            throw;
        }
    }
    
    private async Task ExecuteCompensationAsync(Guid transactionId, List<CompensationStep> steps)
    {
        // é€†åºæ‰§è¡Œè¡¥å¿
        foreach (var step in steps.OrderByDescending(s => s.Step))
        {
            try
            {
                switch (step.Action)
                {
                    case "DeleteBlog":
                        // é‡æ–°åˆ›å»ºBlogï¼ˆå¦‚æœå¯èƒ½ï¼‰
                        break;
                    case "ArchivePosts":
                        // æ¢å¤PostsçŠ¶æ€
                        await _context.Posts
                            .Where(p => p.BlogId == null && p.Status == PostStatus.Archived)
                            .ExecuteUpdateAsync(p => 
                                p.SetProperty(x => x.BlogId, step.BlogId)
                                 .SetProperty(x => x.Status, PostStatus.Active));
                        break;
                    case "BackupPosts":
                        // ä»å¤‡ä»½æ¢å¤æ•°æ®
                        var backup = JsonSerializer.Deserialize<List<PostBackup>>(step.Data);
                        // æ¢å¤é€»è¾‘...
                        break;
                }
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "è¡¥å¿æ­¥éª¤å¤±è´¥: {Step}", step.Action);
                // è®°å½•è¡¥å¿å¤±è´¥ï¼Œå¯èƒ½éœ€è¦äººå·¥å¹²é¢„
                await RecordCompensationFailureAsync(transactionId, step, ex);
            }
        }
    }
}
```

## ğŸ”„ **åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆå¾®æœåŠ¡åœºæ™¯ï¼‰**

### **Sagaæ¨¡å¼å®ç°**
```csharp
public class BlogDeletionSaga
{
    private readonly IBlogService _blogService;
    private readonly IPostService _postService;
    private readonly ICommentService _commentService;
    private readonly ILogger<BlogDeletionSaga> _logger;
    
    public async Task<DeletionResult> DeleteBlogWithSagaAsync(int blogId)
    {
        var sagaId = Guid.NewGuid();
        var steps = new SagaSteps();
        
        try
        {
            // æ­¥éª¤1: é¢„æ£€æŸ¥
            await PreCheckAsync(blogId);
            steps.Add(new SagaStep(sagaId, 1, "PreCheck", SagaStatus.Completed));
            
            // æ­¥éª¤2: å½’æ¡£Postsï¼ˆè¡¥å¿ï¼šæ¢å¤Postsï¼‰
            var postArchivalResult = await _postService.ArchivePostsByBlogAsync(blogId);
            steps.Add(new SagaStep(sagaId, 2, "ArchivePosts", SagaStatus.Completed, 
                CompensationData: postArchivalResult.BackupData));
            
            // æ­¥éª¤3: å½’æ¡£Commentsï¼ˆè¡¥å¿ï¼šæ¢å¤Commentsï¼‰
            var commentArchivalResult = await _commentService.ArchiveCommentsByBlogAsync(blogId);
            steps.Add(new SagaStep(sagaId, 3, "ArchiveComments", SagaStatus.Completed,
                CompensationData: commentArchivalResult.BackupData));
            
            // æ­¥éª¤4: åˆ é™¤Blogï¼ˆè¡¥å¿ï¼šæ¢å¤Blogï¼‰
            await _blogService.SoftDeleteAsync(blogId);
            steps.Add(new SagaStep(sagaId, 4, "DeleteBlog", SagaStatus.Completed,
                CompensationData: JsonSerializer.Serialize(new { BlogId = blogId })));
            
            // æ­¥éª¤5: æ¸…ç†ç¼“å­˜ï¼ˆä¸å¯è¡¥å¿ï¼Œä½†å¹‚ç­‰ï¼‰
            await ClearCachesAsync(blogId);
            steps.Add(new SagaStep(sagaId, 5, "ClearCache", SagaStatus.Completed));
            
            // è®°å½•Sagaå®Œæˆ
            await RecordSagaCompletionAsync(sagaId, steps);
            
            return DeletionResult.Success(sagaId);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Sagaæ‰§è¡Œå¤±è´¥: {SagaId}", sagaId);
            
            // æ‰§è¡Œè¡¥å¿
            await CompensateSagaAsync(sagaId, steps);
            
            return DeletionResult.Failed(sagaId, ex.Message);
        }
    }
    
    private async Task CompensateSagaAsync(Guid sagaId, SagaSteps steps)
    {
        foreach (var step in steps.GetStepsForCompensation())
        {
            try
            {
                await CompensateStepAsync(step);
                step.Status = SagaStatus.Compensated;
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Sagaè¡¥å¿å¤±è´¥: {Step}", step.Action);
                step.Status = SagaStatus.CompensationFailed;
                
                // è®°å½•éœ€è¦äººå·¥å¹²é¢„
                await RecordManualInterventionRequiredAsync(sagaId, step, ex);
            }
        }
    }
}
```

## ğŸ¯ **äº‹åŠ¡çº§åˆ«é€‰æ‹©**

### **ä¸åŒéš”ç¦»çº§åˆ«çš„å½±å“**
```csharp
public class TransactionIsolationService
{
    public async Task UpdateWithIsolationAsync(int blogId)
    {
        // é»˜è®¤éš”ç¦»çº§åˆ«ï¼ˆReadCommittedï¼‰
        using var transaction = await context.Database.BeginTransactionAsync();
        
        // æˆ–è€…æŒ‡å®šéš”ç¦»çº§åˆ«
        using var transaction = await context.Database
            .BeginTransactionAsync(IsolationLevel.Serializable);
        
        try
        {
            // é«˜éš”ç¦»çº§åˆ«å¯ä»¥é˜²æ­¢æ›´å¤šå¹¶å‘é—®é¢˜
            // ä½†ä¼šé™ä½æ€§èƒ½å¹¶å¢åŠ æ­»é”é£é™©
            
            var blog = await context.Blogs.FindAsync(blogId);
            var posts = await context.Posts
                .Where(p => p.BlogId == blogId)
                .ToListAsync();
            
            // ä¸šåŠ¡é€»è¾‘...
            
            await context.SaveChangesAsync();
            await transaction.CommitAsync();
        }
        catch (Exception ex) when (IsDeadlockException(ex))
        {
            await transaction.RollbackAsync();
            // é‡è¯•é€»è¾‘
            await RetryWithBackoffAsync(() => UpdateWithIsolationAsync(blogId));
        }
        catch
        {
            await transaction.RollbackAsync();
            throw;
        }
    }
    
    private bool IsDeadlockException(Exception ex)
    {
        return ex is SqlException sqlEx && sqlEx.Number == 1205;
    }
    
    private async Task RetryWithBackoffAsync(Func<Task> action, int maxRetries = 3)
    {
        var retryCount = 0;
        var delay = TimeSpan.FromMilliseconds(100);
        
        while (retryCount < maxRetries)
        {
            try
            {
                await action();
                return;
            }
            catch (Exception ex) when (IsDeadlockException(ex) && retryCount < maxRetries - 1)
            {
                retryCount++;
                await Task.Delay(delay);
                delay = TimeSpan.FromMilliseconds(delay.TotalMilliseconds * 2); // æŒ‡æ•°é€€é¿
            }
        }
        
        throw new InvalidOperationException($"æ“ä½œåœ¨{maxRetries}æ¬¡é‡è¯•åå¤±è´¥");
    }
}
```

## ğŸ“Š **äº‹åŠ¡æ¨¡å¼å¯¹æ¯”**

| æ¨¡å¼ | é€‚ç”¨åœºæ™¯ | ä¸€è‡´æ€§ | æ€§èƒ½ | å¤æ‚åº¦ |
|------|---------|-------|------|--------|
| **å•æ•°æ®åº“äº‹åŠ¡** | å•ä½“åº”ç”¨ï¼Œå•æ•°æ®åº“ | å¼ºä¸€è‡´æ€§ | é«˜ | ä½ |
| **è¡¥å¿äº‹åŠ¡** | åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæœ€ç»ˆä¸€è‡´æ€§ | æœ€ç»ˆä¸€è‡´æ€§ | ä¸­ | ä¸­ |
| **Sagaæ¨¡å¼** | å¾®æœåŠ¡æ¶æ„ | æœ€ç»ˆä¸€è‡´æ€§ | ä¸­ | é«˜ |
| **2PC/3PC** | ä¸¥æ ¼ä¸€è‡´æ€§è¦æ±‚ | å¼ºä¸€è‡´æ€§ | ä½ | é«˜ |

## ğŸ› ï¸ **å®ç”¨äº‹åŠ¡æ¨¡æ¿**

### **æ¨¡æ¿1ï¼šåŸºç¡€äº‹åŠ¡æ¨¡æ¿**
```csharp
public static async Task ExecuteInTransactionAsync(
    DbContext context, 
    Func<Task> action,
    IsolationLevel isolationLevel = IsolationLevel.ReadCommitted,
    CancellationToken cancellationToken = default)
{
    await using var transaction = await context.Database
        .BeginTransactionAsync(isolationLevel, cancellationToken);
    
    try
    {
        await action();
        await transaction.CommitAsync(cancellationToken);
    }
    catch
    {
        await transaction.RollbackAsync(cancellationToken);
        throw;
    }
}

// ä½¿ç”¨æ–¹å¼
await ExecuteInTransactionAsync(context, async () =>
{
    var blog = await context.Blogs.FindAsync(1);
    var posts = await context.Posts
        .Where(p => p.BlogId == 1)
        .ToListAsync();
    
    // ä¸šåŠ¡é€»è¾‘...
    
    await context.SaveChangesAsync();
});
```

### **æ¨¡æ¿2ï¼šå¸¦é‡è¯•çš„äº‹åŠ¡æ¨¡æ¿**
```csharp
public static async Task ExecuteWithRetryAsync(
    Func<Task> action,
    int maxRetries = 3,
    Func<Exception, bool> shouldRetry = null)
{
    shouldRetry ??= ex => ex is DbUpdateConcurrencyException || 
                         (ex is SqlException sqlEx && sqlEx.Number == 1205);
    
    var retryCount = 0;
    
    while (true)
    {
        try
        {
            await action();
            return;
        }
        catch (Exception ex) when (shouldRetry(ex) && retryCount < maxRetries)
        {
            retryCount++;
            var delay = TimeSpan.FromMilliseconds(100 * Math.Pow(2, retryCount));
            await Task.Delay(delay);
        }
    }
}
```

## âš ï¸ **å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ**

### **é™·é˜±1ï¼šäº‹åŠ¡èŒƒå›´è¿‡å¤§**
```csharp
// âŒ é”™è¯¯ï¼šäº‹åŠ¡åŒ…å«éæ•°æ®åº“æ“ä½œ
public async Task ProcessBlogAsync(int blogId)
{
    using var transaction = await context.Database.BeginTransactionAsync();
    try
    {
        // 1. æ•°æ®åº“æ“ä½œ
        var blog = await context.Blogs.FindAsync(blogId);
        
        // 2. é•¿æ—¶é—´çš„éæ•°æ®åº“æ“ä½œï¼ˆå±é™©ï¼ï¼‰
        await ProcessImagesAsync(blog); // å¯èƒ½è€—æ—¶å‡ åˆ†é’Ÿ
        
        // 3. ç»§ç»­æ•°æ®åº“æ“ä½œ
        await context.SaveChangesAsync();
        
        await transaction.CommitAsync(); // äº‹åŠ¡æŒæœ‰æ—¶é—´è¿‡é•¿ï¼
    }
    catch
    {
        await transaction.RollbackAsync();
        throw;
    }
}

// âœ… æ­£ç¡®ï¼šæ‹†åˆ†äº‹åŠ¡
public async Task ProcessBlogAsync(int blogId)
{
    // äº‹åŠ¡1ï¼šåªå¤„ç†æ•°æ®åº“æ“ä½œ
    using var transaction1 = await context.Database.BeginTransactionAsync();
    try
    {
        var blog = await context.Blogs.FindAsync(blogId);
        blog.Status = BlogStatus.Processing;
        await context.SaveChangesAsync();
        await transaction1.CommitAsync();
    }
    catch
    {
        await transaction1.RollbackAsync();
        throw;
    }
    
    // éäº‹åŠ¡æ“ä½œï¼šå¤„ç†è€—æ—¶ä»»åŠ¡
    await ProcessImagesAsync(blogId);
    
    // äº‹åŠ¡2ï¼šæ›´æ–°çŠ¶æ€
    using var transaction2 = await context.Database.BeginTransactionAsync();
    try
    {
        var blog = await context.Blogs.FindAsync(blogId);
        blog.Status = BlogStatus.Completed;
        await context.SaveChangesAsync();
        await transaction2.CommitAsync();
    }
    catch
    {
        await transaction2.RollbackAsync();
        throw;
    }
}
```

### **é™·é˜±2ï¼šå¿˜è®°å¤„ç†å¹¶å‘å†²çª**
```csharp
// âŒ é”™è¯¯ï¼šæ²¡æœ‰å¤„ç†å¹¶å‘
public async Task UpdatePostAsync(int postId, string newTitle)
{
    using var transaction = await context.Database.BeginTransactionAsync();
    try
    {
        var post = await context.Posts.FindAsync(postId);
        post.Title = newTitle;
        await context.SaveChangesAsync(); // å¯èƒ½æŠ›å‡ºå¹¶å‘å¼‚å¸¸
        await transaction.CommitAsync();
    }
    catch
    {
        await transaction.RollbackAsync();
        throw;
    }
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ä¹è§‚å¹¶å‘
public class Post
{
    public int Id { get; set; }
    public string Title { get; set; }
    
    [Timestamp]  // æˆ– [ConcurrencyCheck]
    public byte[] Version { get; set; }
}

public async Task UpdatePostAsync(int postId, string newTitle)
{
    var retryCount = 0;
    var maxRetries = 3;
    
    while (retryCount < maxRetries)
    {
        using var transaction = await context.Database.BeginTransactionAsync();
        try
        {
            var post = await context.Posts.FindAsync(postId);
            post.Title = newTitle;
            
            await context.SaveChangesAsync();
            await transaction.CommitAsync();
            return;
        }
        catch (DbUpdateConcurrencyException)
        {
            await transaction.RollbackAsync();
            retryCount++;
            
            if (retryCount == maxRetries)
                throw;
            
            await Task.Delay(100 * retryCount);
        }
    }
}
```

## ğŸ† **æœ€ä½³å®è·µæ€»ç»“**

### **å¿…é¡»ä½¿ç”¨äº‹åŠ¡çš„åœºæ™¯**ï¼š
1. **æ›´æ–°å¤šä¸ªå…³è”å®ä½“**ï¼ˆå³ä½¿æ²¡æœ‰å¤–é”®ï¼‰
2. **éœ€è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§**çš„ä¸šåŠ¡æ“ä½œ
3. **è½¬è´¦ã€åº“å­˜æ‰£å‡**ç­‰é‡‘èæ“ä½œ
4. **åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®æ“ä½œ**

### **äº‹åŠ¡è®¾è®¡åŸåˆ™**ï¼š
1. **å°½é‡çŸ­**ï¼šäº‹åŠ¡æ—¶é—´è¶ŠçŸ­è¶Šå¥½
2. **å°½é‡ç®€å•**ï¼šå‡å°‘äº‹åŠ¡ä¸­çš„ä¸šåŠ¡é€»è¾‘
3. **è€ƒè™‘è¡¥å¿**ï¼šä¸ºé•¿æ—¶é—´æ“ä½œè®¾è®¡è¡¥å¿æœºåˆ¶
4. **å¤„ç†å¼‚å¸¸**ï¼šæ€»æ˜¯è€ƒè™‘å¹¶å‘å’Œæ­»é”
5. **ç›‘æ§äº‹åŠ¡**ï¼šè®°å½•é•¿æ—¶é—´äº‹åŠ¡å’Œæ­»é”

### **ä»£ç è´¨é‡æ£€æŸ¥ç‚¹**ï¼š
```csharp
// æ£€æŸ¥æ¸…å•ï¼š
// [ ] äº‹åŠ¡æ˜¯å¦å¿…è¦ï¼Ÿ
// [ ] äº‹åŠ¡èŒƒå›´æ˜¯å¦åˆç†ï¼Ÿ
// [ ] æ˜¯å¦å¤„ç†äº†å¹¶å‘å¼‚å¸¸ï¼Ÿ
// [ ] æ˜¯å¦è€ƒè™‘äº†æ­»é”ï¼Ÿ
// [ ] æ˜¯å¦æœ‰è¡¥å¿æœºåˆ¶ï¼Ÿ
// [ ] äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¦åˆé€‚ï¼Ÿ
// [ ] æ˜¯å¦æœ‰äº‹åŠ¡ç›‘æ§ï¼Ÿ
```

## ğŸ’¡ **æœ€ç»ˆå»ºè®®**

**æ˜¯çš„ï¼Œå–æ¶ˆå¤–é”®åå¿…é¡»æ›´å¤šåœ°ä¾èµ–äº‹åŠ¡**ï¼Œä½†ï¼š

1. **ä¸æ˜¯æ‰€æœ‰æ“ä½œéƒ½éœ€è¦äº‹åŠ¡** - ç®€å•æŸ¥è¯¢ä¸éœ€è¦
2. **äº‹åŠ¡ä¸æ˜¯ä¸‡èƒ½çš„** - éœ€è¦è€ƒè™‘è¡¥å¿å’Œæœ€ç»ˆä¸€è‡´æ€§
3. **é€‰æ‹©åˆé€‚çš„ç­–ç•¥** - æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©å¼ºä¸€è‡´æ€§æˆ–æœ€ç»ˆä¸€è‡´æ€§
4. **ç›‘æ§å’Œä¼˜åŒ–** - äº‹åŠ¡æ€§èƒ½éœ€è¦æŒç»­ç›‘æ§

**è®°ä½**ï¼šäº‹åŠ¡æ˜¯ä¿è¯ä¸€è‡´æ€§çš„é‡è¦å·¥å…·ï¼Œä½†ä¸æ˜¯å”¯ä¸€å·¥å…·ã€‚ç»“åˆä¸šåŠ¡éªŒè¯ã€åº”ç”¨å±‚çº¦æŸå’Œé€‚å½“çš„æ¶æ„è®¾è®¡ï¼Œæ‰èƒ½åœ¨æ— å¤–é”®çš„ç¯å¢ƒä¸­ä¿è¯æ•°æ®è´¨é‡ã€‚