PostgreSQL çš„å‘½åè§„èŒƒæœ‰å¤šç§é£æ ¼ï¼Œä»¥ä¸‹æ˜¯**æœ€ä½³å®è·µå’Œæ¨èè§„èŒƒ**ï¼š

## ğŸ“ **æ ¸å¿ƒåŸåˆ™**

### **1. å¤§å°å†™æ•æ„Ÿæ€§**
```sql
-- PostgreSQL é»˜è®¤æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„
-- ä½†å¸¦åŒå¼•å·çš„åç§°æ˜¯å¤§å°å†™æ•æ„Ÿçš„

CREATE TABLE users;      -- å®é™…åˆ›å»ºä¸º USERSï¼ˆå¤§å†™ï¼‰
CREATE TABLE "Users";    -- åˆ›å»ºä¸º Usersï¼ˆä¿ç•™å¤§å°å†™ï¼‰

-- æŸ¥è¯¢æ—¶
SELECT * FROM users;     -- æ­£ç¡®
SELECT * FROM USERS;     -- ä¹Ÿæ­£ç¡®ï¼ˆè½¬æ¢ä¸ºå°å†™ï¼‰
SELECT * FROM "Users";   -- å¿…é¡»ç”¨åŒå¼•å·
```

### **2. æ¨èçš„å‘½åé£æ ¼**
```sql
-- âœ… æ¨èï¼šè›‡å½¢å‘½åæ³•ï¼ˆsnake_caseï¼‰
CREATE TABLE user_accounts (
    user_id SERIAL PRIMARY KEY,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    email_address VARCHAR(255)
);

-- âŒ é¿å…ï¼šé©¼å³°å‘½åæ³•ï¼ˆåœ¨ PostgreSQL ä¸­å®¹æ˜“æ··æ·†ï¼‰
CREATE TABLE UserAccounts (
    UserId SERIAL PRIMARY KEY,  -- éœ€è¦åŠ å¼•å·ï¼Œå¦åˆ™å˜æˆ USERID
    CreatedAt TIMESTAMP
);
```

## ğŸ† **å®˜æ–¹å’Œç¤¾åŒºæ¨èè§„èŒƒ**

### **PostgreSQL å®˜æ–¹å»ºè®®**
```sql
-- å®˜æ–¹æ–‡æ¡£ç¤ºä¾‹éƒ½ä½¿ç”¨å°å†™+ä¸‹åˆ’çº¿
CREATE TABLE films (
    code        char(5) CONSTRAINT firstkey PRIMARY KEY,
    title       varchar(40) NOT NULL,
    did         integer NOT NULL,
    date_prod   date,
    kind        varchar(10)
);
```

## ğŸ“‹ **è¯¦ç»†å‘½åè§„èŒƒ**

### **1. è¡¨åå‘½åè§„èŒƒ**
```sql
-- âœ… æ­£ç¡®ç¤ºä¾‹
CREATE TABLE users;
CREATE TABLE user_profiles;
CREATE TABLE order_items;
CREATE TABLE audit_logs;
CREATE TABLE product_categories;

-- âŒ é”™è¯¯ç¤ºä¾‹
CREATE TABLE "User";           -- æ··åˆå¤§å°å†™
CREATE TABLE tblUsers;         -- åŒˆç‰™åˆ©å‘½åæ³•ï¼ˆå·²è¿‡æ—¶ï¼‰
CREATE TABLE USER_PROFILES;    -- å…¨å¤§å†™ï¼ˆä¸æ˜“è¯»ï¼‰
```

### **2. åˆ—åå‘½åè§„èŒƒ**
```sql
-- âœ… æ­£ç¡®ç¤ºä¾‹
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    email VARCHAR(100) UNIQUE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE
);

-- å¸ƒå°”å­—æ®µé€šå¸¸ä½¿ç”¨ is_ã€has_ã€can_ å‰ç¼€
is_active, has_verified, can_login, is_deleted
```

### **3. ä¸»é”®å’Œå¤–é”®è§„èŒƒ**
```sql
-- âœ… æ¨èæ–¹å¼
CREATE TABLE users (
    user_id SERIAL PRIMARY KEY  -- è¡¨åå•æ•° + _id
);

CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(user_id),  -- å¤–é”®ä¸ä¸»é”®åŒå
    created_by INTEGER REFERENCES users(user_id)         -- ç‰¹å®šåœºæ™¯ä¸‹å¯ä¸åŒå
);
```

### **4. å…³è”è¡¨ï¼ˆå¤šå¯¹å¤šï¼‰å‘½å**
```sql
-- âœ… æŒ‰å­—æ¯é¡ºåºæˆ–é€»è¾‘é¡ºåº
CREATE TABLE user_roles (          -- users + roles
    user_id INTEGER REFERENCES users(user_id),
    role_id INTEGER REFERENCES roles(role_id),
    PRIMARY KEY (user_id, role_id)
);

CREATE TABLE course_prerequisites ( -- æè¿°æ€§åç§°
    course_id INTEGER REFERENCES courses(course_id),
    prerequisite_id INTEGER REFERENCES courses(course_id),
    PRIMARY KEY (course_id, prerequisite_id)
);
```

## ğŸ“Š **å‘½åè§„èŒƒé€ŸæŸ¥è¡¨**

| å¯¹è±¡ç±»å‹     | å‘½åè§„èŒƒ                   | ç¤ºä¾‹                                  | è¯´æ˜         |
| ------------ | -------------------------- | ------------------------------------- | ------------ |
| **è¡¨**       | å¤æ•°æˆ–é›†åˆåè¯ï¼Œsnake_case | `users`, `order_items`                | é¿å…æŠ½è±¡åè¯ |
| **è§†å›¾**     | `v_` å‰ç¼€æˆ– `_view` åç¼€   | `v_user_summary`, `active_users_view` | è¡¨æ˜æ˜¯è§†å›¾   |
| **ç‰©åŒ–è§†å›¾** | `mv_` å‰ç¼€                 | `mv_daily_sales`                      | ç‰©åŒ–è§†å›¾å‰ç¼€ |
| **åºåˆ—**     | `seq_` å‰ç¼€                | `seq_user_id`                         | è‡ªåŠ¨é€’å¢åºåˆ— |
| **ç´¢å¼•**     | `idx_è¡¨å_åˆ—å`            | `idx_users_email`                     | ä¾¿äºè¯†åˆ«     |
| **ä¸»é”®**     | `pk_è¡¨å`                  | `pk_users`                            | ç³»ç»Ÿé»˜è®¤æ›´å¥½ |
| **å¤–é”®**     | `fk_è¡¨å_å¼•ç”¨è¡¨å`         | `fk_orders_users`                     | å¯è¯»æ€§å¼º     |
| **å”¯ä¸€çº¦æŸ** | `uq_è¡¨å_åˆ—å`             | `uq_users_email`                      | å”¯ä¸€æ€§çº¦æŸ   |
| **æ£€æŸ¥çº¦æŸ** | `ck_è¡¨å_è§„åˆ™`             | `ck_users_age_positive`               | æ£€æŸ¥çº¦æŸ     |

## ğŸ”„ **ä¸ .NET EF Core çš„æ˜ å°„**

### **1. EF Core ä¸­çš„å‘½åè½¬æ¢**
```csharp
// åœ¨ DbContext ä¸­é…ç½®å‘½åè½¬æ¢
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    // æ‰€æœ‰è¡¨åå’Œåˆ—åè½¬æ¢ä¸º snake_case
    modelBuilder.UseSnakeCaseNamingConvention();
    
    // æˆ–æ‰‹åŠ¨é…ç½®
    modelBuilder.Entity<User>(entity => {
        entity.ToTable("users");  // è¡¨å
        entity.Property(e => e.FirstName).HasColumnName("first_name");
        entity.Property(e => e.CreatedAt).HasColumnName("created_at");
    });
}
```

### **2. ä½¿ç”¨ EFCore.NamingConventions åŒ…**
```bash
dotnet add package EFCore.NamingConventions
```

```csharp
// Program.cs æˆ– Startup.cs
builder.Services.AddDbContext<AppDbContext>(options =>
    options.UseNpgsql(connectionString)
           .UseSnakeCaseNamingConvention());  // è‡ªåŠ¨è½¬æ¢
```

### **3. æ•°æ®åº“ä¼˜å…ˆçš„æ˜ å°„ç¤ºä¾‹**
```bash
# ç”Ÿæˆå®ä½“æ—¶æŒ‡å®šå‘½å
dotnet ef dbcontext scaffold ... --use-database-names
```

```csharp
// ç”Ÿæˆçš„å®ä½“
[Table("user_accounts")]
public class UserAccount
{
    [Key]
    [Column("user_id")]
    public int UserId { get; set; }
    
    [Column("first_name")]
    public string FirstName { get; set; }
    
    [Column("created_at")]
    public DateTime CreatedAt { get; set; }
}
```

## ğŸ¯ **ç‰¹æ®Šæƒ…å†µå¤„ç†**

### **1. ç¼©å†™è¯å¤„ç†**
```sql
-- âœ… ä¸€è‡´çš„å°å†™
user_id,          -- ä¸æ˜¯ user_Id
url,              -- ä¸æ˜¯ URL
ip_address,       -- ä¸æ˜¯ IPAddress
http_status_code  -- ä¸æ˜¯ HttpStatusCode

-- æˆ–è€…å…¨å°å†™
userid, ipaddress
```

### **2. ä¿ç•™å…³é”®å­—å¤„ç†**
```sql
-- é¿å…ä½¿ç”¨ PostgreSQL å…³é”®å­—
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    -- âŒ user, group, order æ˜¯å…³é”®å­—
    user_name VARCHAR(50),    -- è€Œä¸æ˜¯ user
    group_name VARCHAR(50),   -- è€Œä¸æ˜¯ group
    order_date DATE           -- è€Œä¸æ˜¯ order
);
```

### **3. é•¿åº¦é™åˆ¶**
```sql
-- PostgreSQL æ ‡è¯†ç¬¦æœ€å¤š 63 å­—èŠ‚
-- ä¸­æ–‡å­—ç¬¦éœ€è¦æ³¨æ„
CREATE TABLE ç”¨æˆ·è¡¨ (  -- å¯èƒ½æœ‰é—®é¢˜
    ç”¨æˆ·ID SERIAL PRIMARY KEY  -- å¯èƒ½æˆªæ–­
);

-- âœ… ä½¿ç”¨è‹±æ–‡å‘½å
CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    chinese_name VARCHAR(100)  -- åˆ—å€¼å¯ä»¥å­˜å‚¨ä¸­æ–‡
);
```

## âš ï¸ **å¸¸è§é”™è¯¯å’Œé™·é˜±**

### **é”™è¯¯1ï¼šå¤§å°å†™ä¸ä¸€è‡´**
```sql
-- åˆ›å»ºæ—¶
CREATE TABLE "UserAccounts" (userId SERIAL);

-- æŸ¥è¯¢æ—¶ï¼ˆå¿…é¡»ä¸€è‡´ï¼‰
SELECT * FROM "UserAccounts";  -- âœ… æ­£ç¡®
SELECT * FROM UserAccounts;    -- âŒ é”™è¯¯ï¼ˆå˜æˆ useraccountsï¼‰
SELECT * FROM useraccounts;    -- âŒ é”™è¯¯
```

### **é”™è¯¯2ï¼šä½¿ç”¨ç‰¹æ®Šå­—ç¬¦**
```sql
-- âŒ é¿å…ç‰¹æ®Šå­—ç¬¦
CREATE TABLE "user-profiles";    -- å‡å·
CREATE TABLE "user.profiles";    -- ç‚¹å·
CREATE TABLE "user$profiles";    -- ç¾å…ƒç¬¦å·

-- âœ… åªç”¨å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿
CREATE TABLE user_profiles;
```

### **é”™è¯¯3ï¼šè¿‡é•¿åç§°**
```sql
-- âŒ å¤ªé•¿ä¸æ˜“è¯»
CREATE TABLE customer_order_line_item_details;

-- âœ… é€‚å½“ç¼©å†™
CREATE TABLE order_item_details;
```

## ğŸ“ **å®é™…é¡¹ç›®è§„èŒƒç¤ºä¾‹**

### **ç”µå­å•†åŠ¡ç³»ç»Ÿç¤ºä¾‹**
```sql
-- è¡¨å
CREATE TABLE customers;
CREATE TABLE products;
CREATE TABLE orders;
CREATE TABLE order_items;
CREATE TABLE categories;
CREATE TABLE product_reviews;
CREATE TABLE shipping_addresses;

-- åˆ—å
CREATE TABLE customers (
    customer_id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    phone_number VARCHAR(20),
    date_of_birth DATE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE,
    is_active BOOLEAN DEFAULT TRUE,
    last_login_at TIMESTAMP WITH TIME ZONE
);

-- å…³è”è¡¨
CREATE TABLE customer_addresses (
    customer_id INTEGER REFERENCES customers(customer_id),
    address_id INTEGER REFERENCES addresses(address_id),
    is_default BOOLEAN DEFAULT FALSE,
    PRIMARY KEY (customer_id, address_id)
);
```

## âœ… **æœ€ä½³å®è·µæ€»ç»“**

1. **ä¸€å¾‹ä½¿ç”¨ snake_case** - è¡¨åã€åˆ—åã€çº¦æŸå
2. **è¡¨åç”¨å¤æ•°** - `users` è€Œä¸æ˜¯ `user`
3. **ä¸»é”®ä¸º `è¡¨å_id`** - `user_id`, `order_id`
4. **å¤–é”®ä¸ä¸»é”®åŒå** - ä¿æŒä¸€è‡´æ€§
5. **å¸ƒå°”å­—æ®µåŠ å‰ç¼€** - `is_`, `has_`, `can_`
6. **æ—¶é—´å­—æ®µåŠ åç¼€** - `_at`, `_date`, `_time`
7. **é¿å…ä¿ç•™å…³é”®å­—** - ä¸ç”¨ `user`, `order` ç­‰
8. **ä¸åŠ ç±»å‹å‰ç¼€** - ä¸ç”¨ `tbl_`, `col_`
9. **å‘½åæœ‰æ„ä¹‰** - è‡ªæè¿°ï¼Œä¸ç”¨ç¼©å†™é™¤éå…¬è®¤
10. **é…åˆ EF Core ä½¿ç”¨å‘½åçº¦å®š** - å‡å°‘æ‰‹åŠ¨æ˜ å°„

**æ ¸å¿ƒå»ºè®®**ï¼šåœ¨æ•´ä¸ªé¡¹ç›®ä¸­**ä¿æŒä¸€è‡´æ€§**æ¯”éµå¾ªä»»ä½•ç‰¹å®šè§„èŒƒæ›´é‡è¦ã€‚ä¸€æ—¦é€‰å®šè§„èŒƒï¼Œå›¢é˜Ÿæ‰€æœ‰æˆå‘˜éƒ½åº”éµå®ˆã€‚